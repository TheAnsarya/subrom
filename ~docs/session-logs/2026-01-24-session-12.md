# Session 12 - January 24, 2026

## Summary
Continued CI/CD implementation, icon refresh, modern tooling upgrade, and code formatting standardization.

## Completed Work

### 1. Game Cartridge Icon Created
- Replaced generic "S" icon with game cartridge design
- Design: Dark slate body + purple label + gold pins + green checkmark badge
- Updated: `installers/common/assets/icon.png`, `icon.ico`, `src/Subrom.Tray/Resources/subrom.ico`

### 2. CI/CD Workflow Implementation
- Created `.github/workflows/ci.yml` with:
	- `build-and-test`: Windows runner for .NET tests (375 tests)
	- `build-ui`: Ubuntu runner with Yarn Berry + Vite build
	- `build-cross-platform`: Matrix builds for win-x64, linux-x64, osx-arm64
- Added CI badge to README.md
- Created `docs/ci-cd.md` documentation

### 3. Modern Yarn Berry (4.12.0) Setup
- Upgraded from Yarn Classic (1.x) to Yarn Berry (4.12.0)
- Added `packageManager` field to `subrom-ui/package.json`
- Updated CI to use corepack with `--immutable` flag
- Regenerated `yarn.lock` in Berry format
- Added `.yarn/install-state.gz` to `.gitignore`

### 4. Code Formatting Standardization
- Ran `dotnet format` on entire solution
- Converted all markdown files to use tabs (not spaces)
- Verified frontend code uses tabs per `.editorconfig`
- All code follows project standards (tabs, K&R braces)

### 5. CI Fixes
- Added `include-prerelease: true` for .NET 10 preview SDK
- Updated test logging for better CI debugging
- UI build passes with modern Yarn

## Technical Details

### Build Tools
- **Vite** v6.4.1 - Primary build tool for frontend
- **Yarn Berry** 4.12.0 - Modern package manager (via corepack)
- **Node.js** 22 - Latest LTS in CI
- **.NET** 10.0.x - Preview SDK with prerelease flag

### Local Development Commands
```bash
# Backend
dotnet build Subrom.sln
dotnet test Subrom.sln
dotnet run --project src/Subrom.Server

# Frontend (from subrom-ui/)
corepack yarn install
corepack yarn dev    # Vite dev server at localhost:3000
corepack yarn build  # Production build
```

## Files Changed
- `.github/workflows/ci.yml` - CI workflow with prerelease support
- `.gitignore` - Added Yarn Berry cache exclusions
- `subrom-ui/package.json` - Added `packageManager: yarn@4.12.0`
- `subrom-ui/yarn.lock` - Regenerated for Berry format
- `docs/ci-cd.md` - New CI/CD documentation
- `README.md` - Added CI badge
- Multiple `.md` files - Tab indentation formatting

## Test Results
- **Backend**: 375 tests passing
- **Frontend**: Vite build successful (327KB JS, 21KB CSS)

## Commits Made
1. `954518b` feat: add CI workflow and improved game cartridge icon
2. `ae2a9df` docs: add CI/CD documentation and README badge
3. `64d0d50` fix: CI workflow build issues
4. `265cd3e` fix: CI workflow - use Windows for tests, Yarn Classic for UI
5. `dea0d59` chore: upgrade to modern Yarn 4.12.0 with corepack

## Next Steps
- Monitor CI run #6 with prerelease SDK flag
- Continue installer implementation (Epic #15)
- Prepare v1.2.0 release with new features
